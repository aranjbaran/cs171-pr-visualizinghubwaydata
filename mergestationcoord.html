<!DOCTYPE html>
<script src="libs/d3/d3.min.js" charset="utf-8"></script>
<script src="libs/jquery/jquery-2.1.1.min.js" charset="utf-8"></script>
<!-- <script src="http://d3js.org/d3.v2.min.js?2.10.0"></script> -->
<script src="libs/bootstrap/js/bootstrap.min.js" charset="utf-8"></script>
<script src="http://d3js.org/queue.v1.min.js"></script>
<script src="js/countvis.js"></script>
<script src="js/pievis.js"></script>
<script src="js/mapvis.js"></script>
<script src="js/uservis.js"></script>


<!--Stylesheets-->
<link rel="stylesheet" type="text/css" href="libs/bootstrap/css/bootstrap.min.css">

<!-- Get some nice font-->
<link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700' rel='stylesheet' type='text/css'>


<!--------------------------------->
<!-- FROM HERE ON IT IS HW3 stuff-->
<!--------------------------------->

<!-- add own vis classes-->

<!-- add own stylesheet-->
<link rel="stylesheet" type="text/css" href="css/myStyle.css">


<html>


        <script>
            var intervals = 
            
              {

"00": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"01": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"02": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"03": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"04": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"05": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"06": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"07": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"08": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"09": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"10": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"11": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"12": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"13": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"14": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"15": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"16": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},

"17": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"18": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"19": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"20": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"21": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"22": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"23": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
},
"24": {
  "3":[],
"4":[],
"5":[],
"6":[],
"7":[],
"8":[],
"9":[],
"10":[],
"11":[],
"12":[],
"13":[],
"14":[],
"15":[],
"16":[],
"17":[],
"18":[],
"19":[],
"20":[],
"21":[],
"22":[],
"23":[],
"24":[],
"25":[],
"26":[],
"27":[],
"28":[],
"29":[],
"30":[],
"31":[],
"32":[],
"33":[],
"34":[],
"35":[],
"36":[],
"37":[],
"38":[],
"39":[],
"40":[],
"41":[],
"42":[],
"43":[],
"44":[],
"45":[],
"46":[],
"47":[],
"48":[],
"49":[],
"50":[],
"51":[],
"52":[],
"53":[],
"54":[],
"55":[],
"56":[],
"57":[],
"58":[],
"59":[],
"60":[],
"61":[],
"62":[],
"63":[],
"64":[],
"65":[],
"66":[],
"67":[],
"68":[],
"69":[],
"70":[],
"71":[],
"72":[],
"73":[],
"74":[],
"75":[],
"76":[],
"77":[],
"78":[],
"79":[],
"80":[],
"81":[],
"82":[],
"83":[],
"84":[],
"85":[],
"86":[],
"87":[],
"88":[],
"89":[],
"90":[],
"91":[],
"92":[],
"93":[],
"94":[],
"95":[],
"96":[],
"97":[],
"98":[],
"totaltrips":[]
}
}

                
               
            var intervals_keys = Object.keys(intervals)
            // console.log(intervals_keys)
                // , "00:10:00", "01:00:00", "01:05:00", "01:10:00", "01:15:00"]

            var stations = ["3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98"]
                // intervals.keys
                // console.log(intervals_keys)
            
                  var dataLoaded = function(error, _intervalData) {

                // var dataLoaded = function(error, _tripData, _newData) {
                    if (!error) {


                        // tripData = _tripData["records"].map(function(d) {

                        //     var res = {
                        //         female: female,
                        //         male: male,
                        //         casual: casual,
                        //         registered: registered
                        //     };

                        //     gender_percent = {
                        //         female_percent: female_percent,
                        //         male_percent: male_percent
                        //     }
                        //     user_percent = {
                        //         casual_percent: casual_percent,
                        //         registered_percent: registered_percent
                        //     }

                        //     if (d["gender"] == "Male") {
                        //         male++

                        //     }
                        //     if (d["gender"] == "Female") {
                        //         female++
                        //     }

                        //     if (d["subsc_type"] == "Registered") {
                        //         registered++
                        //     }
                        //     if (d["subsc_type"] == "Casual") {
                        //         casual++
                        //     }


                        //     female_percent = (female / (male + female))
                        //     male_percent = 1 - female_percent
                        //     registered_percent = (registered / (registered + casual))
                        //     casual_percent = 1 - registered_percent

                        // })

                        // gender_final.push(gender_percent["female_percent"])
                        // gender_final.push(gender_percent["male_percent"])
                        // user_final.push(user_percent["registered_percent"])
                        // user_final.push(user_percent["casual_percent"])


                        // console.log(_intervalData)
                        
                        _intervalData["records"].forEach(function(d) {

                            var timeinterval = gethour(d["interv"])


                            intervals_keys.forEach(function(k) {
                                if (k == timeinterval) {



                                    stations.forEach(function(s) {
                                        if (s == d["station_id"]) {
                                            // console.log(d)



                                            intervals[k][s].push(d)

                                        }

                                    })
                                }


                            })


                        })



                     
                        // newData = _newData

                        sum_trips(intervals)
                        console.log(station_input("03", "5"))
                        intervalData = []

                        intervals_keys.forEach(function (d)
                        {


                            console.log(_intervalData)
                            console.log(d)
                                // if(intervals[d].totaltrips[0])
                                intervalData.push(
                                    {"time": d,
                                        "count": intervals[d].totaltrips[0],
                                        "stationdata": stationsums(d)


                                }

                                    )
                                // else return;

                        })


                        // intervalData = _intervalData

                        // var trips = sum_trips(intervals)
                        // console.log(trips)
                        // var number = current_number(intervals, 11)
                        // console.log(number)
                        // initVis();
                    } // Error end
                    else(console.log(error))

                    // Function end
                }


                var startHere = function() {


                    queue()


                    // .defer(d3.json, 'data/trips_aug12.json')
                    // .defer(d3.json, 'data/triptest.json')
                    .defer(d3.json, 'data/aggcap_aug12.json')
                    // .defer(d3.json, 'hubwaydatachallenge.json')


                    .await(dataLoaded);

                    setTimeout(function(){
                        var stringintervals = JSON.stringify(intervalData)
        
var url = 'data:text/json;charset=utf8,' + encodeURIComponent(stringintervals);
    window.open(url, '_blank');
    window.focus();
                    }, 8000)
                    


                }
                startHere();



            



      

            var gettime = function(d) {

                var value = d3.range(8).map(function() {
                    return 0;
                });


                var i;
                var j = i - 11;

                for (i = 11; i <= 18; i++) {

                    value[i - 11] = d[i]

                }

                time = +value[0] + "" + value[1] + "" + value[2] + "" + value[3] + "" + value[4] + "" + value[5] + "" + value[6] + "" + value[7]

                return time;

            }


            var gethour = function(d) {

                var value = d3.range(8).map(function() {
                    return 0;
                });


                var i;
                var j = i - 11;

                for (i = 11; i <= 18; i++) {

                    value[i - 11] = d[i]

                }

                hour = +value[0] + "" + value[1]
                return hour;

            }
            var convert_time = function(d) {
                var value = d3.range(5).map(function() {
                    return 0;
                });

                var i;
                

                for (i = 0; i <= 4; i++) {

                    value[i] = d[i]

                }

                var minutes = Number(+ value[3] + "" + value[4] )
                console.log(minutes)
                if (minutes != "00")
                {
                    minutes = minutes/60
                    var x = 0
                    var formatted = +minutes +"0";
                    // minutes.toFixed(3)
                }
                else (formatted = "0.00")
                console.log(minutes)
                var time = +value[0] + "" + value[1] + "" + formatted[1]+"" +formatted[2]+""+formatted[3]

                return time;
            }

            var sum_trips = function(d) {

                for (j = 0; j < intervals_keys.length; j++) {
                    var arrivals = 0
                    for (i = 0; i < stations.length; i++) {

                        var station_info = d[intervals_keys[j]][stations[i]]
                        station_info.forEach(function(k) {
                            // if ()
                            arrivals += k["bike_arrivals"]

                        })



                    }
                    intervals[intervals_keys[j]]["totaltrips"].push(arrivals)

                }



            }

            var current_number = function(d, stationnumber) {
                var arrivals = 0;
                var departures = 0;
               
                for (var j = 0; j < intervals_keys.length; j++) 
                {
                    // console.log(d[intervals_keys[j]])
                   

                    d[intervals_keys[j]][stationnumber].forEach(function (k) {


                            console.log("heree")
                            arrivals += k["bike_arrivals"]
                            departures += k["bike_departures"]
                            // arrivals += d[intervals_keys[j]][stations[i]]["bike_arrivals"]
                            // departures += d[intervals_keys[j]][stations[i]]["bike_departures"]
                        })
                }
                    console.log(arrivals)
                    return {"arrivals": arrivals, "departures": departures}


                    
                    // return arrivals;
                    // console.log(arrivals)

                

            }

            var station_input = function (time, station){
                console.log("here")

                var day_arrivals = 0;
                var day_departures = 0;
                var end_arrivals = 0;
                var end_departures = 0;

                intervals_keys.forEach(function (j){
                    if (j == time)
                    {
                        // console.log(intervals["j"])
                        // var h = num.toString(j)
                        // console.log(h)
                      
                                 stations.forEach(function (s){

                                    if (s == station)
                                    {


                                        intervals[j][s].forEach(function (z){
                                            if (z.weekday == 1)
                                            {
                                                day_departures += z.bike_departures
                                                day_arrivals += z.bike_arrivals
                                            }
                                            else 
                                            {
                                                 end_departures += z.bike_departures
                                                end_arrivals += z.bike_arrivals
                                            }



                                        })
                                    }
                                 })


                        }   
                    })



                      var res = {"station": station,
                                    "weekday":
                                        {
                                            "arrivals": day_arrivals,
                                            "departures": day_departures
                                        },
                                    "weekend":
                                         {
                                            "arrivals": end_arrivals,
                                            "departures": end_departures
                                        }  
                                    }
                        return res;

                         
                }
               

           var stationsums = function (d) {
                var finalstation = []
                stations.forEach(function (k){

                    
                    finalstation.push(station_input(d, k))
                })
                return finalstation;

           }




            //         )
            //     for (j = 0; j < intervals_keys.length; j++) {
            //         var arrivals = 0
            //         var departures = 0
            //         for (i = 0; i < stations.length; i++) {

            //             var station_info = d[intervals_keys[j]][stations[i]]
            //             station_info.forEach(function(k) {
            //                 // if ()
            //                 arrivals += k["bike_arrivals"]

            //             })



            //         }




            //         return {"id": ,
            //                 "weekday":
            //                     {
            //                         "arrivals":
            //                         "departures":
            //                     },
            //                 "weekend":
            //                      {
            //                         "arrivals":
            //                         "departures":
            //                     }  
            //                 }
            //         arrivals, "departures": departures}

            //     }

            // }


        
        </script>
</body>

</html>